<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>DaGuang</title><meta name="author" content="DaGuang"><meta name="copyright" content="DaGuang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="学习！学习！">
<meta property="og:type" content="website">
<meta property="og:title" content="DaGuang">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="DaGuang">
<meta property="og:description" content="学习！学习！">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/avatar.jpeg">
<meta property="article:author" content="DaGuang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/avatar.jpeg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'DaGuang',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-03-24 10:56:37'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="DaGuang" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/top_img.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">DaGuang</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">DaGuang</h1><div id="site_social_icons"><a class="social-icon" href="https://github.com/daguangyang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1063745644@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="tencent://QQInterLive/?Cmd=2&amp;Uin=1063745644" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/08/15/ansible/6-playbook%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" title="6-playbook流程控制">     <img class="post_bg" src="https://i.loli.net/2021/09/26/JE46tO7wXTMfxuD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="6-playbook流程控制"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/08/15/ansible/6-playbook%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" title="6-playbook流程控制">6-playbook流程控制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-14T16:25:09.000Z" title="发表于 2021-08-15 00:25:09">2021-08-15</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/ansible/">ansible</a></span></div><div class="content">  

循环with_items/home/ansible/hosts 配置清单
123test3test4192.168.27.7
当想要获取第二条主机名时可以使用&#123;&#123;groups.ungrouped[1]&#125;&#125;来进行获取。可以在playbook中使用with_items进行循环
12345678--- - hosts : test3  tasks :     - name : 输出未分组的主机的主机名      #关键字with_items会将&#123;&#123;groups.ungrouped&#125;&#125;的列表信息进行处理，将每条信息单独放在&#123;&#123;item&#125;&#125;中，获取&#123;&#123;item&#125;&#125;的值时会循环获取列表中的每一条信息      with_items : &quot;&#123;&#123;groups.ungrouped&#125;&#125;&quot;       debug :         msg : &quot;&#123;&#123;i ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/08/12/ansible/5-playbook%E6%8B%93%E5%B1%95/" title="5-playbook拓展">     <img class="post_bg" src="https://i.loli.net/2021/09/26/JE46tO7wXTMfxuD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="5-playbook拓展"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/08/12/ansible/5-playbook%E6%8B%93%E5%B1%95/" title="5-playbook拓展">5-playbook拓展</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-12T13:43:22.000Z" title="发表于 2021-08-12 21:43:22">2021-08-12</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/ansible/">ansible</a></span></div><div class="content">  

Handlers首先我们设定以这个场景。想要将test3主机中/home/test.txt文件中的我们现在学习XXX修改为我们现在学习ansible，并打印修改后的结果。test.txt文本  
1234567123我们现在学习XXX321
编写的playbook为  
12345678910--- - hosts : test3  tasks :    - name: 修改test3主机中/home/test.txt文件中的`我们现在学习XXX`修改为`我们现在学习ansible`     lineinfile :       path : /home/test.txt       regexp : &quot;我们现在学习XXX&quot;       line : &quot;我们现在学习ansible&quot;   - name : 将/home/test.txt中的内容输出到/home/test1.txt     shell: cat /home/test.txt &gt; /home/test1.txt
可以看出两个任务都执行成功了。如果要再执行一次该playbo ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/08/04/ansible/4-playbook/" title="4-playbook快速入门">     <img class="post_bg" src="https://i.loli.net/2021/09/26/JE46tO7wXTMfxuD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="4-playbook快速入门"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/08/04/ansible/4-playbook/" title="4-playbook快速入门">4-playbook快速入门</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-04T06:49:49.000Z" title="发表于 2021-08-04 14:49:49">2021-08-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/ansible/">ansible</a></span></div><div class="content">  

ansible的任务配置文件是playbook，可以称为是“剧本”，playbook中包含一系列任务，每个任务被称为是“play、戏剧”。学习playbook需要先学习 Post not found: YAML教程/YAML教程。  
playbook语法特性
需要以---开始，并顶行首写  
次行开始正常写playbook的内容，建议首先将该playbook的作用标明  
使用#表示注释  
缩进必须要进行注意，同级别的缩进格数是一样的，不能使用Tab进行缩进  
区分大小写  

shell与playbook的转换ansible可以将shell脚本或者命令轻松的转换为playbook。  
12touch /home/playbook-test.txtecho &quot;playbook 学习&quot; &gt; /home/playbook-test.txt
简单的转换为playbook文件。  
1234567---     # 开始字符，文件顶行写- hosts: test3  #指定远程操作的主机  tasks:     - name: &quot;创建/hom ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/08/02/Linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="正则表达式">     <img class="post_bg" src="https://i.loli.net/2021/08/02/cX51yi4KrLYRfJU.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="正则表达式"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/08/02/Linux/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" title="正则表达式">正则表达式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-01T16:22:23.000Z" title="发表于 2021-08-02 00:22:23">2021-08-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">

正则表达式正则表达式的分类
基本的正则表达式（Basic Regular Expression 又叫Basic RegEx 简称BREs）  
扩展的正则表达式（Extended Regular Expression 又叫Extended RegEx 简称EREs）  
Perl的正则表达式（Perl Regular Expression 又叫Perl RegEx 简称PREs）  

基本组成部分


正则表达式
描述
示例
Basic RegEx
Extended RegEx
Python RegEx
Perl regEx



\
转义符，将特殊字符进行转义，忽略其特殊意义
a.b匹配a.b，但不能匹配ajb，.被转义为特殊意义
\
\
\
\


^
匹配行首，awk中，^则是匹配字符串的开始
^tux匹配以tux开头的行
^
^
^
^


$
匹配行尾，awk中，$则是匹配字符串的结尾
tux$匹配以tux结尾的行
$
$
$
$


.
匹配除换行符\n之外的任意单个字符，awk则中可以
ab.匹配abc或bad，不可匹配abcd或abde，只能匹配单字符
.
.
. ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/07/31/Linux/Linux%E5%AD%A6%E4%B9%A0/" title="Linux学习">     <img class="post_bg" src="https://i.loli.net/2021/08/02/cX51yi4KrLYRfJU.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux学习"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/07/31/Linux/Linux%E5%AD%A6%E4%B9%A0/" title="Linux学习">Linux学习</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-07-31T06:47:19.000Z" title="发表于 2021-07-31 14:47:19">2021-07-31</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">

Linux命令查看网站Linux命令大全Linux命令手册Linux命令大全(手册)  
Linux命令文件及目录管理命令mkdir作用：创建目录常用参数:  








-p
递归创建多级目录


-m
建立目录的同时设置目录的权限


-z
设置安全上下文


-v
显示目录的创建过程


rm作用：删除常用参数:  








-f
忽略不存在的文件，不会出现警告信息


-i
删除前会询问用户是否操作


-r/R
递归删除


-v
显示指令的详细执行过程


mv作用：移动文件、文件名重命名常用参数:  








-i
若存在同名文件，则向用户询问是否覆盖


-f
覆盖已有文件时，不进行任何提示


-b
当文件存在时，覆盖前为其创建一个备份


-u
当源文件比目标文件新，或者目标文件不存在时，才执行移动此操作


cp作用：复制文件常用参数:  








-f
若目标文件已存在，则会直接覆盖原文件


-i
若目标文件已存在，则会询问是否覆盖


-p
保留源文件或目录的所有属性


-r
递归复制文件和目录


-d
当复制符号连接时 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/07/13/ansible/3-Ad-Hoc%E5%91%BD%E4%BB%A4%E9%9B%86/" title="3-ansible Ad-Hoc命令集">     <img class="post_bg" src="https://i.loli.net/2021/09/26/JE46tO7wXTMfxuD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="3-ansible Ad-Hoc命令集"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/07/13/ansible/3-Ad-Hoc%E5%91%BD%E4%BB%A4%E9%9B%86/" title="3-ansible Ad-Hoc命令集">3-ansible Ad-Hoc命令集</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-07-13T13:18:33.000Z" title="发表于 2021-07-13 21:18:33">2021-07-13</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/ansible/">ansible</a></span></div><div class="content">清单配置详解

ansible有两种完成任务的方式：  

Ad-Hoc：也就是ansible命令，相当于linux命令  
ansible-playbook：ansible-playbook命令，相当于shell脚本  

Ad-Hoc用法1ansible &lt;host-pattern&gt; [options]
[options]  



选项
解释



-v
输出详细信息，-vvv输出更加详细的信息


-i PATH
指定inventory配置文件，默认是/etc/ansible/hosts


-f NUM
指定并发数，默认是使用的ansible.cfg中forks=5


-m NAME
指定使用的模块名


-M PATH
指定模块的存放路径


-a ‘xxxxx’
模块参数


-k ：
认证密码


-K ：
sudo时使用的密码


-o ：
标准输出至一行


-b ：
相当于sudo命令


-t PATH
将输出信息保存在PATH目录下，文件名为远程主机名


-T seconds
设置最大超时时间，单位秒


-B seconds
后台执行命令，超 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/07/13/ansible/2-ansible%E5%9F%BA%E7%A1%80%E5%85%83%E7%B4%A0%E4%BB%8B%E7%BB%8D/" title="2-ansible基础元素介绍">     <img class="post_bg" src="https://i.loli.net/2021/09/26/JE46tO7wXTMfxuD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2-ansible基础元素介绍"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/07/13/ansible/2-ansible%E5%9F%BA%E7%A1%80%E5%85%83%E7%B4%A0%E4%BB%8B%E7%BB%8D/" title="2-ansible基础元素介绍">2-ansible基础元素介绍</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-07-13T06:33:10.000Z" title="发表于 2021-07-13 14:33:10">2021-07-13</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/ansible/">ansible</a></span></div><div class="content">ansible基础元素介绍

ansible配置文件解析/etc/ansible:配置文件目录，Inventory主机配置清单，日常运维的所有的配置类操作也是基于此目录进行。ansible不是一种服务所以在修改配置文件后不需要进行重启等操作。ansible自身的配置文件/etc/ansible/ansible.cfg，文件遵循INI风格。ansible.cfg配置文件可以有多个，读取顺序是当前命令执行目录ansible.cfg–&gt;用户家目录ansible.cfg–&gt;/etc/ansible/ansible.cfg。  

[defaults]  
123456789101112131415161718192021#inventory      = /etc/ansible/hosts                    #主机配置清单位置#library        = /usr/share/my_modules/                #库文件路径#module_utils   = /usr/share/my_module_utils/           # ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/07/11/ansible/1-ansible%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" title="1-ansible基本概念">     <img class="post_bg" src="https://i.loli.net/2021/09/26/JE46tO7wXTMfxuD.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="1-ansible基本概念"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/07/11/ansible/1-ansible%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" title="1-ansible基本概念">1-ansible基本概念</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-07-10T16:43:03.000Z" title="发表于 2021-07-11 00:43:03">2021-07-11</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/ansible/">ansible</a></span></div><div class="content">  

ansible学习网站马哥Ansible中文权威指南Ansible官方文档  
ansible可以做什么&emsp;&emsp;它是“配置管理工具”、“自动化运维工具”。&emsp;&emsp;可以完成一些批量任务，或者完成一些经常场重复的工作。例如：在10台机器上安装nginx服务，并启动；将某个文件一次性拷贝到10台服务器上。&emsp;&emsp;获取这些工作也可以使用脚本来完成，但是ansible具有一些优秀的特性，例如：会比较“当前状态”与“目标状态”是否一致，若不一致，会将“当前状态”编程“目标状态”;若一致，则不进行任何操作，这种特性被称为 幂等性。而且ansible只需要ssh即可正常工作，不需要在受管机器上安装agent端；以及将受管机器的IP信息添加在ansible的管理清单中。&emsp;&emsp;ansible没有客户端，因此底层通信依赖系统软件，Linux下基于OpenSSH，windows下基于PowerShell，管理端必须是Linux系统。使用者在管理节点通过ansible将指令推送到被管理端执行，在执行完毕后自动删除产生的临时文件。  
An ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/08/24/docker/7-%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E4%B8%8E%E5%AE%B9%E5%99%A8%E5%85%B3%E8%81%94/" title="7.端口映射与容器关联">     <img class="post_bg" src="https://i.loli.net/2021/11/04/hPOg389sWfSLZpG.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="7.端口映射与容器关联"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/08/24/docker/7-%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E4%B8%8E%E5%AE%B9%E5%99%A8%E5%85%B3%E8%81%94/" title="7.端口映射与容器关联">7.端口映射与容器关联</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-08-24T15:34:45.000Z" title="发表于 2020-08-24 23:34:45">2020-08-24</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/docker/">docker</a></span></div><div class="content">  

端口映射实现容器访问从外部访问容器应用启动容器时，若不指定对应参数，在容器外部将无法通过网络访问容器内的网络应用和服务。这就需要使用-P、-p参数来指定端口映射。-P（大写），是将随机映射一个宿主机49000～49900的端口到内部容器开放的网络端口。-p（小写的）则可以指定要映射的端口，并且，在一个指定端口上只可以绑定一个容器。  
映射所有接口地址 docker run -it -d -p 50001:50001 --name test ubuntu:latest /bin/bash  
映射到指定地址的指定端口 docker run -it -d -p 127.0.0.1:50001:50001 --name test ubuntu:latest /bin/bash  
映射到指定地址的任意端口 docker run -it -d -p 127.0.0.1::50001 --name test ubuntu:latest /bin/bash这样就会将localhost的任意端口到容器的5000端口，本地主机会自动分配一个端口。  
查看映射端口配置docker port  ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2019/04/22/docker/6.docker%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86/" title="6.docker数据管理">     <img class="post_bg" src="https://i.loli.net/2021/11/04/hPOg389sWfSLZpG.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="6.docker数据管理"></a></div><div class="recent-post-info"><a class="article-title" href="/2019/04/22/docker/6.docker%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86/" title="6.docker数据管理">6.docker数据管理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-04-22T15:58:48.000Z" title="发表于 2019-04-22 23:58:48">2019-04-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/docker/">docker</a></span></div><div class="content">  

在容器中管理数据主要有两种方式  

数据卷（Volumes）  
数据卷容器：使用特定容器维护数据卷  

数据卷数据卷是一个可供一个或多个容器使用的特殊目录，可以提供个很多有用的特性  

数据卷可以在容器之间共享和使用
对数据卷的修改会立马生效
对数据卷的更新，不会影响镜像
数据卷会默认一直存在，即使容器被删除

注意：数据卷的使用，类似于Linux下对目录或文件进行mount，镜像中的被指定为挂载点的目录中的文件会隐藏掉，能显示看的是挂载的数据卷
创建一个数据卷12345678#创建一个数据卷my-vol。创建的数据卷在`/var/lib/docker/volumes`下  docker volume create my-vol#查看所有的数据卷docker volume ls#查看指定数据卷my-vol的信息docker volume inspect my-vol

启动一个挂载数据卷的容器在用docker run命令的时候，使用- -mount标记来将数据卷挂载到容器里。再一次docker run中可以挂载都多个数据卷 。下面创建一个名为web的容器，并加载一个数据 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">DaGuang</div><div class="author-info__description">学习！学习！</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/daguangyang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1063745644@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="tencent://QQInterLive/?Cmd=2&amp;Uin=1063745644" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/03/24/YAML/YAML%E5%9F%BA%E7%A1%80/" title="YAML基础"><img src="https://s2.loli.net/2022/03/24/9bBLo4WtTsJpyAu.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="YAML基础"/></a><div class="content"><a class="title" href="/2022/03/24/YAML/YAML%E5%9F%BA%E7%A1%80/" title="YAML基础">YAML基础</a><time datetime="2022-03-24T02:38:40.000Z" title="发表于 2022-03-24 10:38:40">2022-03-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/20/Linux/%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%85%8D%E7%BD%AE%E6%9C%AC%E5%9C%B0%E6%BA%90/" title="虚拟机配置本地源"><img src="https://i.loli.net/2021/08/02/cX51yi4KrLYRfJU.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="虚拟机配置本地源"/></a><div class="content"><a class="title" href="/2022/03/20/Linux/%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%85%8D%E7%BD%AE%E6%9C%AC%E5%9C%B0%E6%BA%90/" title="虚拟机配置本地源">虚拟机配置本地源</a><time datetime="2022-03-19T18:48:51.000Z" title="发表于 2022-03-20 02:48:51">2022-03-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/15/Linux/Linux%E5%90%AF%E5%8A%A8%E7%AE%A1%E7%90%86/" title="Linux启动管理"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux启动管理"/></a><div class="content"><a class="title" href="/2022/03/15/Linux/Linux%E5%90%AF%E5%8A%A8%E7%AE%A1%E7%90%86/" title="Linux启动管理">Linux启动管理</a><time datetime="2022-03-15T08:05:03.000Z" title="发表于 2022-03-15 16:05:03">2022-03-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/25/Linux/%E6%96%87%E6%9C%AC%E4%B8%89%E5%89%91%E5%AE%A2/" title="文本三剑客"><img src="https://i.loli.net/2021/08/02/cX51yi4KrLYRfJU.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="文本三剑客"/></a><div class="content"><a class="title" href="/2021/12/25/Linux/%E6%96%87%E6%9C%AC%E4%B8%89%E5%89%91%E5%AE%A2/" title="文本三剑客">文本三剑客</a><time datetime="2021-12-24T16:24:36.000Z" title="发表于 2021-12-25 00:24:36">2021-12-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/09/23/Linux/Cobbler%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/" title="Cobbler自动化部署"><img src="https://i.loli.net/2021/09/06/WhQmBarcpXFRkON.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cobbler自动化部署"/></a><div class="content"><a class="title" href="/2021/09/23/Linux/Cobbler%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/" title="Cobbler自动化部署">Cobbler自动化部署</a><time datetime="2021-09-23T11:40:15.000Z" title="发表于 2021-09-23 19:40:15">2021-09-23</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">8</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/YAML/"><span class="card-category-list-name">YAML</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ansible/"><span class="card-category-list-name">ansible</span><span class="card-category-list-count">8</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/docker/"><span class="card-category-list-name">docker</span><span class="card-category-list-count">9</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Ad-Hoc%E5%91%BD%E4%BB%A4%E9%9B%86/" style="font-size: 1.1em; color: #999">Ad-Hoc命令集</a> <a href="/tags/Dockerfile/" style="font-size: 1.1em; color: #999">Dockerfile</a> <a href="/tags/FTP/" style="font-size: 1.1em; color: #999">FTP</a> <a href="/tags/Linux/" style="font-size: 1.1em; color: #999">Linux</a> <a href="/tags/Supervisor/" style="font-size: 1.1em; color: #999">Supervisor</a> <a href="/tags/YAML/" style="font-size: 1.1em; color: #999">YAML</a> <a href="/tags/ansible%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" style="font-size: 1.1em; color: #999">ansible基本概念</a> <a href="/tags/ansible%E5%9F%BA%E7%A1%80%E5%85%83%E7%B4%A0%E4%BB%8B%E7%BB%8D/" style="font-size: 1.1em; color: #999">ansible基础元素介绍</a> <a href="/tags/cobbler/" style="font-size: 1.1em; color: #999">cobbler</a> <a href="/tags/docker%E4%BB%93%E5%BA%93/" style="font-size: 1.1em; color: #999">docker仓库</a> <a href="/tags/docker%E5%9F%BA%E7%A1%80%E5%8F%8A%E5%AE%89%E8%A3%85/" style="font-size: 1.1em; color: #999">docker基础及安装</a> <a href="/tags/docker%E5%AE%B9%E5%99%A8/" style="font-size: 1.1em; color: #999">docker容器</a> <a href="/tags/docker%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86/" style="font-size: 1.1em; color: #999">docker数据管理</a> <a href="/tags/docker%E7%9B%B8%E5%85%B3%E6%8A%A5%E9%94%99/" style="font-size: 1.1em; color: #999">docker相关报错</a> <a href="/tags/docker%E9%95%9C%E5%83%8F/" style="font-size: 1.1em; color: #999">docker镜像</a> <a href="/tags/grep/" style="font-size: 1.1em; color: #999">grep</a> <a href="/tags/playbook/" style="font-size: 1.5em; color: #99a9bf">playbook</a> <a href="/tags/playbook%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD/" style="font-size: 1.1em; color: #999">playbook条件判断</a> <a href="/tags/playbook%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" style="font-size: 1.1em; color: #999">playbook流程控制</a> <a href="/tags/rsync/" style="font-size: 1.1em; color: #999">rsync</a> <a href="/tags/%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8docker/" style="font-size: 1.1em; color: #999">为什么使用docker</a> <a href="/tags/%E6%9C%AC%E5%9C%B0%E6%BA%90/" style="font-size: 1.1em; color: #999">本地源</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 1.1em; color: #999">正则表达式</a> <a href="/tags/%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E4%B8%8E%E5%AE%B9%E5%99%A8%E5%85%B3%E8%81%94/" style="font-size: 1.1em; color: #999">端口映射与容器关联</a> <a href="/tags/%E8%B0%83%E8%AF%95%E5%99%A8/" style="font-size: 1.1em; color: #999">调试器</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">九月 2021</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/08/"><span class="card-archive-list-date">八月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2019/04/"><span class="card-archive-list-date">四月 2019</span><span class="card-archive-list-count">8</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">27</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-03-24T02:56:37.279Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my blog</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>function history_calendar_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>那年今日</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>';
                console.log('已挂载history_calendar')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='all'|| 'all' ==='all')){

            history_calendar_injector_config()
        } </script><script data-pjax  src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script data-pjax>function electric_clock_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img id="card-clock-loading" src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-clock/clock/images/weather/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading" class="entered loading"></div></div></div></div></div>';
                console.log('已挂载electric_clock')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='all'|| 'all' ==='all')){

            electric_clock_injector_config()
        } </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax  src="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.js"></script><!-- hexo injector body_end end --></body></html>